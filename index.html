<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíï Valentine Card</title>

<style>
body {
    margin: 0; padding: 0; background: #ffd6e0;
    font-family: cursive; text-align:center; overflow-x:hidden;
}

/* FORM BOX */
.form-box {
    width: 350px; margin: 20px auto; padding: 15px;
    background: #fff; border-radius: 15px; box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
}
.form-box input, .form-box textarea {
    width: 90%; padding: 10px; margin: 8px 0;
    border-radius: 10px; border: 1px solid #e60039; outline:none; box-sizing:border-box;
}
.form-box button {
    background: gray; color:white; border:none;
    padding: 12px 25px; border-radius:25px; font-size:1rem; cursor:not-allowed;
}
.form-box button.active {
    background: #e60039; cursor:pointer;
}

/* CARD CONTAINER */
#container {
    width: 350px; margin: 20px auto 50px; padding: 25px;
    background-color: #ffe6e6; border: 2px solid #e60039;
    border-radius: 20px; box-shadow: 2px2px10px rgba(0,0,0,0.2); text-align:center;
}

/* HEADER */
#header h1 { color:#e60039; margin:10px 0; }
#header hr { border:1px solid #e60039; }

/* HEART IMAGE */
.heart-image {
    width: 120px; height:120px; margin:15px auto; border-radius:50%;
    border:3px solid #e60039;
    background: linear-gradient(45deg, #ff69b4 0%, #e60039 100%);
    display:flex; align-items:center; justify-content:center;
    font-size:60px; color:white;
}

/* MESSAGE BOX */
.message {
    background: #ffe6f0; padding: 20px; border-radius: 20px;
    margin: 20px 0; box-shadow:2px2px10px rgba(0,0,0,0.2); color:#e60039;
}

/* SHARE LINK BUTTON */
#shareLink {
    display:none; background:#e60039; color:white; padding:12px 25px;
    border-radius:25px; text-decoration:none; margin:5px; display:inline-block;
}

/* SEND BUTTONS */
.send-btn {
    background: #e60039; color: white; border:none; padding:12px 25px;
    border-radius:25px; font-size:1rem; cursor:pointer; margin:5px;
}
.send-btn:hover { background:#b8002d; transform:scale(1.05); }

.email-btn { background:#007bff; }
.email-btn:hover { background:#0056b3; }

/* FLOATING HEARTS */
.heart { position:fixed; bottom:0; font-size:20px; animation:floatUp 4s linear infinite; }
@keyframes floatUp { from { transform:translateY(0); opacity:1; } to { transform:translateY(-100vh); opacity:0; } }
</style>
</head>

<body>

<!-- INPUT FORM -->
<div class="form-box">
    <input type="text" id="toName" placeholder="Recipient name" oninput="updateCard()">
    <textarea id="msgText" placeholder="Your message" oninput="updateCard()"></textarea>
    <input type="text" id="fromName" placeholder="Your name" oninput="updateCard()">
    <button id="generateLinkBtn" onclick="generateLink()">Generate Shareable Link</button>
</div>

<!-- VALENTINE CARD -->
<div id="container">
    <div id="header">
        <h1>‚ù§Ô∏è Happy Valentine's Day! ‚ù§Ô∏è</h1>
        <hr>
    </div>
    <div class="heart-image">üíï</div>
    <div class="message">
        <h2 id="dearName">Dear Name,</h2>
        <p id="cardMessage">You mean the world to me...</p>
    </div>
    <div class="message">
        <h3 id="senderName">Love, Your Name</h3>
    </div>

    <!-- SHARE BUTTONS -->
    <a id="shareLink" target="_blank">Click to copy/share your card link</a><br>
    <button class="send-btn" id="whatsappBtn" onclick="sendWhatsApp()">üí¨ WhatsApp</button>
    <button class="send-btn email-btn" id="emailBtn" onclick="sendEmail()">‚úâÔ∏è Email</button>
</div>

<script>
// Update card as user types
function updateCard() {
    const to = document.getElementById("toName").value;
    const msg = document.getElementById("msgText").value;
    const from = document.getElementById("fromName").value;

    document.getElementById("dearName").innerText = to ? `Dear ${to},` : "Dear Name,";
    document.getElementById("cardMessage").innerText = msg ? msg : "You mean the world to me...";
    document.getElementById("senderName").innerText = from ? `Love, ${from}` : "Love, Your Name";

    const btn = document.getElementById("generateLinkBtn");
    if(msg.trim() !== "") btn.classList.add("active"); else btn.classList.remove("active");
}

// Generate shareable link
function generateLink() {
    const to = encodeURIComponent(document.getElementById("toName").value.trim());
    const msg = encodeURIComponent(document.getElementById("msgText").value.trim());
    const from = encodeURIComponent(document.getElementById("fromName").value.trim());

    if(!msg){ alert("Please write a message first!"); return; }

    const url = `${location.origin}${location.pathname}?to=${to}&msg=${msg}&from=${from}`;
    const shareLink = document.getElementById("shareLink");
    shareLink.href = url;
    shareLink.style.display = "inline-block";

    navigator.clipboard.writeText(url)
        .then(() => alert("Link copied to clipboard!"))
        .catch(() => alert("Copy failed! Link: " + url));
}

// WhatsApp share
function sendWhatsApp() {
    const to = document.getElementById("toName").value || "someone special";
    const msg = document.getElementById("msgText").value;
    const from = document.getElementById("fromName").value || "me";
    const url = encodeURIComponent(location.origin + location.pathname + `?to=${to}&msg=${msg}&from=${from}`);
    const waText = `Valentine Card for ${to}\n\n"${msg}"\n\nLove, ${from}\n\nView it here: ${url}`;
    window.open(`https://wa.me/?text=${encodeURIComponent(waText)}`, '_blank');
}

// Email share
function sendEmail() {
    const to = document.getElementById("toName").value || "someone special";
    const msg = document.getElementById("msgText").value;
    const from = document.getElementById("fromName").value || "me";
    const url = location.origin + location.pathname + `?to=${encodeURIComponent(to)}&msg=${encodeURIComponent(msg)}&from=${encodeURIComponent(from)}`;
    const subject = `üíï Valentine Card for ${to}`;
    const body = `Hi! ${from} made you this beautiful Valentine card!\n\n${msg}\n\nView it here: ${url}`;
    window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
}

// Load card from URL parameters
function loadFromURL() {
    const params = {};
    location.search.substring(1).split("&").forEach(pair=>{
        if(pair){
            const [key,value] = pair.split("=");
            params[key] = decodeURIComponent(value || "");
        }
    });
    if(params.to || params.msg || params.from){
        document.getElementById("dearName").innerText = params.to ? `Dear ${params.to},` : "Dear Name,";
        document.getElementById("cardMessage").innerText = params.msg ? params.msg : "You mean the world to me...";
        document.getElementById("senderName").innerText = params.from ? `Love, ${params.from}` : "Love, Your Name";
    }
}

loadFromURL();

// Floating hearts
setInterval(() => {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerText = "‚ù§Ô∏è";
    heart.style.left = Math.random() * 100 + "vw";
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(), 4000);
}, 500);
</script>
</body>
</html>
