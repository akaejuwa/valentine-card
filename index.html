<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíï Valentine Card</title>

<style>
body {
    margin:0; padding:0; background:#ffd6e0; font-family:cursive; text-align:center; overflow-x:hidden;
}
.form-box {
    width:350px; margin:20px auto; padding:15px;
    background:#fff; border-radius:15px; box-shadow:2px2px10px rgba(0,0,0,0.2);
}
.form-box input, .form-box textarea {
    width:90%; padding:10px; margin:8px 0; border-radius:10px; border:1px solid #e60039; outline:none; box-sizing:border-box;
}
#container {
    width:350px; margin:20px auto 50px; padding:25px; background:#ffe6e6;
    border:2px solid #e60039; border-radius:20px; box-shadow:2px2px10px rgba(0,0,0,0.2);
}
#header h1 { color:#e60039; margin:10px 0; }
#header hr { border:1px solid #e60039; }
.heart-image {
    width:120px; height:120px; margin:15px auto; border-radius:50%;
    border:3px solid #e60039; background:linear-gradient(45deg,#ff69b4 0%,#e60039 100%);
    display:flex; align-items:center; justify-content:center; font-size:60px; color:white;
}
.message {
    background:#ffe6f0; padding:20px; border-radius:20px; margin:20px 0; box-shadow:2px2px10px rgba(0,0,0,0.2); color:#e60039;
}
.send-btn {
    background:#e60039; color:white; border:none; padding:12px 25px;
    border-radius:25px; font-size:1rem; cursor:pointer; margin:5px;
}
.send-btn:hover { background:#b8002d; transform:scale(1.05); }
.email-btn { background:#007bff; }
.email-btn:hover { background:#0056b3; }
.heart { position:fixed; bottom:0; font-size:20px; animation:floatUp 4s linear infinite; }
@keyframes floatUp { from { transform:translateY(0); opacity:1; } to { transform:translateY(-100vh); opacity:0; } }
#shareLink {
    display:none; background:#e60039; color:white; padding:12px 25px; border-radius:25px;
    text-decoration:none; margin:5px; display:inline-block;
}
</style>
</head>

<body>

<!-- INPUT FORM -->
<div class="form-box" id="formBox">
    <input type="text" id="toName" placeholder="Recipient name">
    <textarea id="msgText" placeholder="Your message"></textarea>
    <input type="text" id="fromName" placeholder="Your name">
    <button id="generateLinkBtn" onclick="generateLink()">Generate Shareable Link</button>
</div>

<!-- VALENTINE CARD -->
<div id="container">
    <div id="header">
        <h1>‚ù§Ô∏è Happy Valentine's Day! ‚ù§Ô∏è</h1>
        <hr>
    </div>
    <div class="heart-image">üíï</div>
    <div class="message">
        <h2 id="dearName">Dear Name,</h2>
        <p id="cardMessage">You mean the world to me...</p>
    </div>
    <div class="message">
        <h3 id="senderName">Love, Your Name</h3>
    </div>

    <!-- SHARE LINK -->
    <a id="shareLink" target="_blank">Click to open/share your card</a><br>

    <!-- DIRECT SHARE -->
    <button class="send-btn" onclick="sendWhatsApp()">üí¨ WhatsApp</button>
    <button class="send-btn email-btn" onclick="sendEmail()">‚úâÔ∏è Email</button>
</div>

<script>
// Update card live
function updateCard() {
    const to = document.getElementById("toName").value;
    const msg = document.getElementById("msgText").value;
    const from = document.getElementById("fromName").value;

    document.getElementById("dearName").innerText = to ? `Dear ${to},` : "Dear Name,";
    document.getElementById("cardMessage").innerText = msg ? msg : "You mean the world to me...";
    document.getElementById("senderName").innerText = from ? `Love, ${from}` : "Love, Your Name";
}

// Generate shareable link (localStorage version)
function generateLink() {
    const to = document.getElementById("toName").value.trim();
    const msg = document.getElementById("msgText").value.trim();
    const from = document.getElementById("fromName").value.trim();

    if(!msg){ alert("Please enter a message!"); return; }

    // Store card in localStorage
    const cardData = { to, msg, from };
    localStorage.setItem("valentineCard", JSON.stringify(cardData));

    // Show generic link
    const url = location.origin + location.pathname + "?view=true";
    const linkEl = document.getElementById("shareLink");
    linkEl.href = url;
    linkEl.style.display = "inline-block";

    // Copy to clipboard
    navigator.clipboard.writeText(url)
        .then(()=>alert("Link copied! Send it to your loved one."))
        .catch(()=>alert("Copy failed. Link: " + url));
}

// Load card if shared link clicked
function loadCardFromLocalStorage() {
    const params = new URLSearchParams(location.search);
    if(params.get("view") === "true"){
        const cardData = JSON.parse(localStorage.getItem("valentineCard") || "{}");
        if(cardData.msg){
            document.getElementById("dearName").innerText = cardData.to ? `Dear ${cardData.to},` : "Dear Name,";
            document.getElementById("cardMessage").innerText = cardData.msg;
            document.getElementById("senderName").innerText = cardData.from ? `Love, ${cardData.from}` : "Love, Your Name";
            document.getElementById("formBox").style.display = "none"; // hide form
            document.getElementById("shareLink").style.display = "none"; // hide share button
        }
    }
}

// WhatsApp share
function sendWhatsApp() {
    const to = document.getElementById("dearName").innerText.replace("Dear ", "").replace(",", "");
    const msg = document.getElementById("cardMessage").innerText;
    const from = document.getElementById("senderName").innerText.replace("Love, ", "");
    const url = location.origin + location.pathname + "?view=true";
    const waText = `Valentine Card for ${to}\n\n"${msg}"\n\nLove, ${from}\n\nView it here: ${url}`;
    window.open(`https://wa.me/?text=${encodeURIComponent(waText)}`, '_blank');
}

// Email share
function sendEmail() {
    const to = document.getElementById("dearName").innerText.replace("Dear ", "").replace(",", "");
    const msg = document.getElementById("cardMessage").innerText;
    const from = document.getElementById("senderName").innerText.replace("Love, ", "");
    const url = location.origin + location.pathname + "?view=true";
    const subject = `üíï Valentine Card for ${to}`;
    const body = `Hi! ${from} made you this beautiful Valentine card!\n\n${msg}\n\nView it here: ${url}`;
    window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
}

// Floating hearts
setInterval(()=>{
    const heart = document.createElement("div");
    heart.className="heart"; heart.innerText="‚ù§Ô∏è";
    heart.style.left = Math.random()*100+"vw";
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),4000);
},500);

// Run on load
updateCard();
loadCardFromLocalStorage();
</script>

</body>
</html>
